## –î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã

–î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –±–∞–∑–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã:

**–û—Å–Ω–æ–≤–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- admin@zvezdnoe-vereteno.ru ‚Äî SUPERADMIN ‚Äî –ø–∞—Ä–æ–ª—å: admin1234

**–î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∏–¥–æ–º):**
- demoadmin@zvezdnoe-vereteno.ru ‚Äî SUPERADMIN ‚Äî –ø–∞—Ä–æ–ª—å: demo1234
- demomoderator@zvezdnoe-vereteno.ru ‚Äî MODERATOR ‚Äî –ø–∞—Ä–æ–ª—å: demo1234
- demomaster@zvezdnoe-vereteno.ru ‚Äî MASTER ‚Äî –ø–∞—Ä–æ–ª—å: demo1234
- demoplayer@zvezdnoe-vereteno.ru ‚Äî PLAYER ‚Äî –ø–∞—Ä–æ–ª—å: demo1234

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞: `/auth/login`

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏:

- MASTER ‚Üí `/master`
- MODERATOR/SUPERADMIN ‚Üí `/admin`
- –∏–Ω–∞—á–µ ‚Üí `/player`

### –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏–¥—ã (–µ—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–µ—Ç)

1) –ü–æ–¥–Ω—è—Ç—å –ë–î:
```bash
make start-db
```

2) –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno make db-migrate
```

3) –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–∏–¥-–¥–∞–Ω–Ω—ã–º–∏:
```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno make db-seed
```

–°–∏–¥—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–µ–π.

### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno \
pnpm --filter db run create-user \
  --email=user@example.com \
  --password=password123 \
  --name="User Name" \
  --role=SUPERADMIN
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏: `PLAYER`, `MASTER`, `MODERATOR`, `SUPERADMIN`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≥—Ä—É–ø–ø

### üéØ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π

**1. –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã (–ú–∞—Å—Ç–µ—Ä):**
```
–õ–æ–≥–∏–Ω: demomaster@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/master
–î–µ–π—Å—Ç–≤–∏—è:
- –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5)
- –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç (ONLINE/OFFLINE/MIXED)
- –í–∫–ª—é—á–∏—Ç—å "–ù–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç"
- –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
```

**2. –¢–µ—Å—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–ò–≥—Ä–æ–∫):**
```
–õ–æ–≥–∏–Ω: demoplayer@zvezdnoe-vereteno.ru / demo1234
–°–ø–æ—Å–æ–± A - –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:
- –í—Å—Ç–∞–≤–∏—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

–°–ø–æ—Å–æ–± B - –†—É—á–Ω–æ–π –≤–≤–æ–¥:
- URL: http://localhost:3000/player
- –ù–∞–∂–∞—Ç—å "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ"
- –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (UUID –∏–∑ —Å—Å—ã–ª–∫–∏)
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
–ö–∞–±–∏–Ω–µ—Ç –∏–≥—Ä–æ–∫–∞ (/player):
- –ì—Ä—É–ø–ø–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ "–ú–æ–∏ –≥—Ä—É–ø–ø—ã"
- –°—á—ë—Ç—á–∏–∫ –≥—Ä—É–ø–ø —É–≤–µ–ª–∏—á–∏–ª—Å—è
- –ö–Ω–æ–ø–∫–∞ "üìã –ü–æ–¥—Ä–æ–±–Ω–µ–µ" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏

–ö–∞–±–∏–Ω–µ—Ç –º–∞—Å—Ç–µ—Ä–∞ (/master):
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å
- –í –¥–µ—Ç–∞–ª—è—Ö –≥—Ä—É–ø–ø—ã –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π –∏–≥—Ä–æ–∫
```

### üîç –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –§—É–Ω–∫—Ü–∏–∏ –º–∞—Å—Ç–µ—Ä–∞

**–°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π —Ñ–æ—Ä–º—ã (–Ω–∞–∑–≤–∞–Ω–∏–µ 3-50 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è referralCode (UUID)
- ‚úÖ –£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—è "–ú–µ—Å—Ç–æ" –¥–ª—è OFFLINE/MIXED
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø–∞–º–∏:**
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ë–∞–≥-—Ñ–∏–∫—Å: –æ—á–∏—Å—Ç–∫–∞ –ø–æ–ª—è "–ú–µ—Å—Ç–æ" –ø—Ä–∏ —Å–º–µ–Ω–µ –Ω–∞ ONLINE
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (üîó –ö–æ–¥)
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Å—Å—ã–ª–∫–∏ (üìã –°—Å—ã–ª–∫–∞)

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Å—Ç–∞–≤–∞ –≥—Ä—É–ø–ø—ã —Å –¥–µ—Ç–∞–ª—è–º–∏
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–µ (nickname, email, –¥–∞—Ç–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –≥—Ä—É–ø–ø—ã
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

#### –§—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞

**–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –≥—Ä—É–ø–ø–∞–º:**
- ‚úÖ –ü–æ –ø—Ä—è–º–æ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ `/join?code=UUID`
- ‚úÖ –ü–æ –∫–æ–¥—É –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –∏–≥—Ä–æ–∫–∞
- ‚úÖ –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –∏–≥—Ä–æ–∫–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è: –≥—Ä—É–ø–ø–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç, –µ—Å—Ç—å –º–µ—Å—Ç–∞

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–∏–µ–º:**
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–≤–æ–∏—Ö –≥—Ä—É–ø–ø
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ –∏ —Å–æ—Å—Ç–∞–≤–µ
- ‚úÖ –í—ã—Ö–æ–¥ –∏–∑ –≥—Ä—É–ø–ø—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### ‚ö†Ô∏è –¢–µ—Å—Ç-–∫–µ–π—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫

**–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
```
1. –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥:
   - –í–≤–µ—Å—Ç–∏ —Å–ª—É—á–∞–π–Ω—ã–π UUID ‚Üí "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è"

2. –ó–∞–∫—Ä—ã—Ç—ã–π –Ω–∞–±–æ—Ä:
   - –ú–∞—Å—Ç–µ—Ä: –≤—ã–∫–ª—é—á–∏—Ç—å "–ù–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç" –≤ –≥—Ä—É–ø–ø–µ
   - –ò–≥—Ä–æ–∫: –ø–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è ‚Üí "–ù–∞–±–æ—Ä –≤ –≥—Ä—É–ø–ø—É –∑–∞–∫—Ä—ã—Ç"

3. –ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞:
   - –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞ 1 —É—á–∞—Å—Ç–Ω–∏–∫–∞
   - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å 1 –∏–≥—Ä–æ–∫–∞
   - –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤—Ç–æ—Ä–æ–≥–æ ‚Üí "–ì—Ä—É–ø–ø–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞"

4. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:
   - –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ ‚Üí "–£–∂–µ —É—á–∞—Å—Ç–Ω–∏–∫"

5. –î–æ—Å—Ç—É–ø –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
   - –û—Ç–∫—Ä—ã—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –±–µ–∑ –≤—Ö–æ–¥–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /auth/login
```

### üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
DATABASE_URL="postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno" \
pnpm --filter db run create-user \
  --email=testplayer1@example.com \
  --password=test1234 \
  --role=PLAYER

DATABASE_URL="postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno" \
pnpm --filter db run create-user \
  --email=testplayer2@example.com \
  --password=test1234 \
  --role=PLAYER
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ API (curl):**
```bash
# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø (—Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é)
curl -H "Authorization: Bearer <token>" http://localhost:3000/api/groups

# –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ
curl -X POST http://localhost:3000/api/groups/join \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <token>" \
  -d '{"referralCode":"<UUID>"}'
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

**–õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø: `POST /api/groups 201`
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ: `POST /api/groups/join 200`
- –û—à–∏–±–∫–∏: `POST /api/groups/join 404/409`
- –î–µ—Ç–∞–ª–∏ –≥—Ä—É–ø–ø—ã: `GET /api/groups/[id]/details 200`

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:**
```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –≥—Ä—É–ø–ø
SELECT g.name, g.referral_code, g.max_members, g.is_recruiting 
FROM groups g;

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø
SELECT g.name, pp.nickname, u.email, gm.created_at
FROM groups g
JOIN group_members gm ON g.id = gm.group_id
JOIN player_profiles pp ON gm.player_id = pp.id
JOIN users u ON pp.user_id = u.id;
```


