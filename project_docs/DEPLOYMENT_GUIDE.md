# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **Node.js 18+**, **pnpm 8+**
- **Docker** –∏ **Docker Compose** (–∏–ª–∏ `docker compose`)
- –î–æ—Å—Ç—É–ø –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

#### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–æ–¥–∏–Ω —Ä–∞–∑)
```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ Docker –±–µ–∑ sudo (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å)
make docker-access
# –ó–∞—Ç–µ–º –ª–∏–±–æ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è, –ª–∏–±–æ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
newgrp docker

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pnpm (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
pnpm -v || (corepack enable && corepack prepare pnpm@9 --activate)
make install
```

#### 2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
```bash
make first-run       # install ‚Üí –ø–æ–¥–Ω—è—Ç—å —Å—Ç–µ–∫ ‚Üí –º–∏–≥—Ä–∞—Ü–∏–∏ ‚Üí —Å–∏–¥—ã
make dev             # –∑–∞–ø—É—Å—Ç–∏—Ç—å Next.js dev —Å–µ—Ä–≤–µ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ—Ä—Ç 3000)
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: **http://localhost:3000**

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–ø–æ—à–∞–≥–æ–≤–æ)

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone <repository-url>
cd ZV
pnpm install
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ë–î –∏ —Å–µ—Ä–≤–∏—Å–æ–≤
```

#### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
docker-compose up -d postgres minio
# –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ make –∫–æ–º–∞–Ω–¥—ã:
make start-stack     # –ø–æ–¥–Ω—è—Ç—å –ë–î (Postgres) –∏ Minio (–ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫)
```

#### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
pnpm db:generate     # –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –∏–∑ —Å—Ö–µ–º—ã
pnpm db:migrate      # –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –ë–î
pnpm db:seed         # –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

#### 5. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
pnpm dev            # Next.js dev —Å–µ—Ä–≤–µ—Ä
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (—Å–º. `env.example`):

```env
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno

# NextAuth
NEXTAUTH_SECRET=dev-secret-change-in-production
NEXTAUTH_URL=http://localhost:3000

# –ü—É–±–ª–∏—á–Ω—ã–π URL
PUBLIC_BASE_URL=http://localhost:3000
```

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**:

```env
# S3/MinIO —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ñ–∞–π–ª–æ–≤
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=zv_admin
S3_SECRET_KEY=zv_admin_password
S3_BUCKET_AVATARS=avatars
S3_BUCKET_UPLOADS=uploads
S3_BUCKET_DOCUMENTS=documents

# Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
EMAIL_FROM=noreply@zvezdnoe-vereteno.ru
SMTP_URL=smtp://user:pass@localhost:587

# Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
TELEGRAM_BOT_TOKEN=your_bot_token
TELEGRAM_WEBHOOK_URL=https://your-domain.com/api/telegram/webhook

# –ü–ª–∞—Ç–µ–∂–∏ YooKassa
YKS_SHOP_ID=your_shop_id
YKS_SECRET=your_secret_key

# –§–ª–∞–≥–∏ —Ñ—É–Ω–∫—Ü–∏–π
FEATURE_PAYMENTS=false
FEATURE_TELEGRAM=false
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ**: –ø—Ä–∞–≤–∫–∏ `.env` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ–ø–ª–∞—Ç—ã: —Ç–æ–ª—å–∫–æ YooKassa.

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª** (`docker-compose.yml`):
- **`postgres`**: PostgreSQL 15-alpine, –ø–æ—Ä—Ç `5433‚Üí5432`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `zv_user`, –ë–î `zvezdnoe_vereteno`
- **`minio`**: RELEASE.2024-01-16, –ø–æ—Ä—Ç—ã `9000` (API) –∏ `9001` (Console)
- **Volume'—ã**: `postgres_data`, `minio_data`

**–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
```bash
docker ps
```

### –ü–æ—Ä—Ç—ã –∏ –¥–æ—Å—Ç—É–ø

- **Next.js dev —Å–µ—Ä–≤–µ—Ä**: –ø–æ—Ä—Ç `3000` (–∏–ª–∏ `3001` –µ—Å–ª–∏ –∑–∞–Ω—è—Ç)
- **PostgreSQL**: —Ö–æ—Å—Ç-–ø–æ—Ä—Ç `5433` (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `5432`)
- **MinIO API**: `9000`
- **MinIO Console**: `9001` (admin: `zv_admin` / `zv_admin_password`)
- **Drizzle Studio**: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `STUDIO_PORT` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `4983`)

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
```bash
make start-stack     # –ø–æ–¥–Ω—è—Ç—å –ë–î (Postgres) –∏ Minio (–ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫)
make start-db        # –ø–æ–¥–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ Postgres
make stop            # –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ dev-–ø—Ä–æ—Ü–µ—Å—Å—ã

# –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —è–≤–Ω–æ —á–µ—Ä–µ–∑ sudo (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
make stop-docker-sudo
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
make dev             # Next.js dev —Å–µ—Ä–≤–µ—Ä
make build           # —Å–±–æ—Ä–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
make start           # –∑–∞–ø—É—Å–∫ –ø—Ä–æ–¥-—Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ build
make lint            # –ª–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
make format          # –∞–≤—Ç–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏–Ω—Ç–∞ (web)
make typecheck       # –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ TypeScript
make test            # –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø–æ –ø–∞–∫–µ—Ç–∞–º
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Drizzle ORM)
```bash
make db-generate     # —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ —Å—Ö–µ–º—ã
make db-migrate      # –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –ë–î
make db-seed         # –∑–∞–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
make db-push         # —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã —Å –ë–î (drizzle-kit push)
make db-reset        # —Å–±—Ä–æ—Å–∏—Ç—å —Å—Ö–µ–º—É public, –∑–∞—Ç–µ–º migrate + seed
make db-studio       # –æ—Ç–∫—Ä—ã—Ç—å Drizzle Studio (CLI)
make db-studio-open  # –æ—Ç–∫—Ä—ã—Ç—å Studio –∏ –∞–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç—å –±—Ä–∞—É–∑–µ—Ä
```

### –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
–ú–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –ø–æ—Ä—Ç—ã –Ω–∞ –ª–µ—Ç—É:
```bash
make dev NEXT_PORT=4000
make db-studio-open STUDIO_PORT=5555
make stop NEXT_PORT=4000 STUDIO_PORT=5555
```

## üîÑ –ü–µ—Ä–µ–Ω–æ—Å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –¥—Ä—É–≥—É—é –º–∞—à–∏–Ω—É

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–æ–≤–æ–π –º–∞—à–∏–Ω—ã

**–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- Node.js 18+, pnpm 8+
- Docker –∏ Docker Compose
- –î–æ—Å—Ç—É–ø –∫ –∏—Å—Ö–æ–¥–Ω–æ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –∏ –∫ –¥–∞–Ω–Ω—ã–º (–¥–∞–º–ø –ë–î, —Ñ–∞–π–ª—ã S3/MinIO –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

**–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
git clone <repository-url>
cd ZV
pnpm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env (DATABASE_URL, NEXTAUTH_SECRET, SMTP, S3 –∏ —Ç.–¥.)
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Postgres –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Ö–æ—Å—Ç-–ø–æ—Ä—Ç—É `5433` (–ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `5432`).

### 3. –ó–∞–ø—É—Å–∫ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash
make start-stack      # –ø–æ–¥–Ω–∏–º–µ—Ç Postgres –∏ MinIO
```

### 4. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

#### –ß–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
pnpm db:generate
pnpm db:migrate
pnpm db:seed         # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –¥–∞–º–ø–∞ (–µ—Å–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ):
```bash
# –ü—Ä–∏–º–µ—Ä: –¥–∞–º–ø —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å—Ç–∞—Ä–æ–π –º–∞—à–∏–Ω–µ —á–µ—Ä–µ–∑ pg_dump
pg_dump -Fc -U zv_user -h 127.0.0.1 -p 5433 zvezdnoe_vereteno > backup.dump

# –ù–∞ –Ω–æ–≤–æ–π –º–∞—à–∏–Ω–µ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è zv_postgres)
docker cp backup.dump zv_postgres:/backup.dump
docker exec -it zv_postgres bash -lc "pg_restore -U zv_user -d zvezdnoe_vereteno --clean --if-exists /backup.dump"
```

### 5. –ü–µ—Ä–µ–Ω–æ—Å —Ñ–∞–π–ª–æ–≤ MinIO (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

**–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ mc (MinIO Client) –Ω–∞ –æ–±–µ–∏—Ö –º–∞—à–∏–Ω–∞—Ö:**
```bash
# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–∏–∞—Å—ã
mc alias set old http://OLD_HOST:9000 <ACCESS_KEY> <SECRET_KEY>
mc alias set new http://127.0.0.1:9000 zv_admin zv_admin_password

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ –±–∞–∫–µ—Ç—ã
mc mirror old/avatars new/avatars
mc mirror old/uploads new/uploads
mc mirror old/documents new/documents
```

### 6. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
pnpm dev
# –∏–ª–∏ –ø—Ä–æ–¥-—Ä–µ–∂–∏–º
pnpm build && pnpm start
```

### 7. –ß–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞
- ‚úÖ –ó–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞ –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º `/auth/login`, `/player`
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω—è–ª–∏—Å—å)
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ MinIO Web Console: `http://localhost:9001`
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á—ë—Ç–æ–≤ –º–∞—Å—Ç–µ—Ä–æ–≤ (—Å–º. —Ä–∞–∑–¥–µ–ª "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á—ë—Ç–æ–≤")

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### –ü—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç–∏–ª—è–º–∏ (CSS –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è)
–ï—Å–ª–∏ —Å—Ç–∏–ª–∏ —Å–ª–µ—Ç–µ–ª–∏ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∞–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:
```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä
pkill -f "next dev"

# 2. –û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à Next.js
cd apps/web && rm -rf .next

# 3. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
cd /home/damir/projects/ZV && pnpm --filter web install

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
make dev
```
–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5).

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ –æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–ª–æ–Ω–∫–∞—Ö:
```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
DATABASE_URL="postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno" make db-migrate

# –ò–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
make db-generate
make db-migrate
```

#### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker
- **–ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç**: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 3001 (Next dev —Å–∞–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è)
- **–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Docker –±–µ–∑ sudo**: `make docker-access` –∏ –ø–µ—Ä–µ‚Äë–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
- **–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` (–ø–æ—Ä—Ç 5433), —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Postgres –∂–∏–≤ –∏ –¥–æ—Å—Ç—É–ø–µ–Ω

#### –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **–°–µ—Ä–≤–µ—Ä –ø–æ–¥–Ω—è–ª—Å—è –Ω–∞ `:3001`**: –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –Ω–∞ `http://localhost:3001`
- **–û—à–∏–±–∫–∞ –º–æ–¥—É–ª—è `bcrypt`**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `bcryptjs` (JS-–≤–µ—Ä—Å–∏—è). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `pnpm -C apps/web i`
- **–í URL –≤–∏–¥–Ω—ã `?email=&password=`**: –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞–ø—Ä—è–º—É—é, —Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è POST –∏ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

### –ü–æ–ª–µ–∑–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- –î–æ—Å—Ç—É–ø –∫ Docker –±–µ–∑ sudo –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `make docker-access`. –ï—Å–ª–∏ –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥—ã –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ ‚Äî –≤—ã–π–¥–∏—Ç–µ –∏–∑ —Å–µ—Å—Å–∏–∏ –∏ –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞, –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `newgrp docker`
- –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î –∏ –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –±–µ—Ä—É—Ç—Å—è –∏–∑ `.env`. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å `.env`, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–æ–±—â–∏—Ç–µ ‚Äî –º—ã –Ω–µ –ø—Ä–∞–≤–∏–º –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –î–ª—è —Å–ø—Ä–∞–≤–∫–∏ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `make help`

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–û—Å–Ω–æ–≤–Ω–æ–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:**
- `admin@zvezdnoe-vereteno.ru` ‚Äî SUPERADMIN ‚Äî –ø–∞—Ä–æ–ª—å: `admin1234`

**–î–µ–º–æ-–∞–∫–∫–∞—É–Ω—Ç—ã (—Å–æ–∑–¥–∞—é—Ç—Å—è —Å–∏–¥–æ–º):**
- `demoadmin@zvezdnoe-vereteno.ru` ‚Äî SUPERADMIN ‚Äî –ø–∞—Ä–æ–ª—å: `demo1234`
- `demomoderator@zvezdnoe-vereteno.ru` ‚Äî MODERATOR ‚Äî –ø–∞—Ä–æ–ª—å: `demo1234`
- `demomaster@zvezdnoe-vereteno.ru` ‚Äî MASTER ‚Äî –ø–∞—Ä–æ–ª—å: `demo1234`
- `demoplayer@zvezdnoe-vereteno.ru` ‚Äî PLAYER ‚Äî –ø–∞—Ä–æ–ª—å: `demo1234`

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞**: `/auth/login`

**–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏:**
- MASTER ‚Üí `/master`
- MODERATOR/SUPERADMIN ‚Üí `/admin`
- –∏–Ω–∞—á–µ ‚Üí `/player`

### –ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏–¥—ã (–µ—Å–ª–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –Ω–µ—Ç)

1. **–ü–æ–¥–Ω—è—Ç—å –ë–î:**
```bash
make start-db
```

2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno make db-migrate
```

3. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å–∏–¥-–¥–∞–Ω–Ω—ã–º–∏:**
```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno make db-seed
```

–°–∏–¥—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –¥—É–±–ª–µ–π.

### –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
DATABASE_URL=postgresql://zv_user:zv_password@localhost:5433/zvezdnoe_vereteno \
pnpm --filter db run create-user \
  --email=user@example.com \
  --password=password123 \
  --name="User Name" \
  --role=SUPERADMIN
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–ª–∏**: `PLAYER`, `MASTER`, `MODERATOR`, `SUPERADMIN`

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

#### üéØ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–π —Å–∏—Å—Ç–µ–º—ã –≥—Ä—É–ø–ø

**1. –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã (–ú–∞—Å—Ç–µ—Ä):**
```
–õ–æ–≥–∏–Ω: demomaster@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/master
–î–µ–π—Å—Ç–≤–∏—è:
- –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å: –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, —É—á–∞—Å—Ç–Ω–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5)
- –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç (ONLINE/OFFLINE/MIXED)
- –í–∫–ª—é—á–∏—Ç—å "–ù–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç"
- –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
- –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
```

**2. –¢–µ—Å—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–ò–≥—Ä–æ–∫):**
```
–õ–æ–≥–∏–Ω: demoplayer@zvezdnoe-vereteno.ru / demo1234
–°–ø–æ—Å–æ–± A - –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞:
- –í—Å—Ç–∞–≤–∏—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –≤ –∞–¥—Ä–µ—Å–Ω—É—é —Å—Ç—Ä–æ–∫—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

–°–ø–æ—Å–æ–± B - –†—É—á–Ω–æ–π –≤–≤–æ–¥:
- URL: http://localhost:3000/player
- –ù–∞–∂–∞—Ç—å "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –≥—Ä—É–ø–ø–µ"
- –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (UUID –∏–∑ —Å—Å—ã–ª–∫–∏)
- –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
```

**3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
```
–ö–∞–±–∏–Ω–µ—Ç –∏–≥—Ä–æ–∫–∞ (/player):
- –ì—Ä—É–ø–ø–∞ –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ "–ú–æ–∏ –≥—Ä—É–ø–ø—ã"
- –°—á—ë—Ç—á–∏–∫ –≥—Ä—É–ø–ø —É–≤–µ–ª–∏—á–∏–ª—Å—è
- –ö–Ω–æ–ø–∫–∞ "üìã –ü–æ–¥—Ä–æ–±–Ω–µ–µ" –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏

–ö–∞–±–∏–Ω–µ—Ç –º–∞—Å—Ç–µ—Ä–∞ (/master):
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —É–≤–µ–ª–∏—á–∏–ª–æ—Å—å
- –í –¥–µ—Ç–∞–ª—è—Ö –≥—Ä—É–ø–ø—ã –ø–æ—è–≤–∏–ª—Å—è –Ω–æ–≤—ã–π –∏–≥—Ä–æ–∫
```

#### üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –æ—Ç—á—ë—Ç–æ–≤ –º–∞—Å—Ç–µ—Ä–æ–≤

**1. –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ (–ú–∞—Å—Ç–µ—Ä):**
```
–õ–æ–≥–∏–Ω: demomaster@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/master/reports-demo
–î–µ–π—Å—Ç–≤–∏—è:
- –ù–∞–∂–∞—Ç—å "–°–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä—ã (–º–∏–Ω–∏–º—É–º 50 —Å–∏–º–≤–æ–ª–æ–≤)
- –î–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ù–∞–∂–∞—Ç—å "–î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞" –∏ –≤—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –±–∞—Ç—Ç–ª–ø–∞—Å—Å–∞—Ö
- –°–æ–∑–¥–∞—Ç—å –æ—Ç—á—ë—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–∫–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏"
```

**2. –ú–æ–¥–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤ (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä):**
```
–õ–æ–≥–∏–Ω: demoadmin@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/demo-admin-reports
–î–µ–π—Å—Ç–≤–∏—è:
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—á—ë—Ç–æ–≤ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –û–¥–æ–±—Ä–∏—Ç—å –æ—Ç—á—ë—Ç - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –∏–≥—Ä
- –û—Ç–∫–ª–æ–Ω–∏—Ç—å –æ—Ç—á—ë—Ç —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∏–∫–æ–Ω–∫–∞ –∫–æ–ª–æ–∫–æ–ª—å—á–∏–∫–∞)
```

**3. –ò—Å—Ç–æ—Ä–∏—è –æ—Ç—á—ë—Ç–æ–≤ (–ò–≥—Ä–æ–∫):**
```
–õ–æ–≥–∏–Ω: demoplayer@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/player/reports
–î–µ–π—Å—Ç–≤–∏—è:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–æ–≤, –≥–¥–µ –∏–≥—Ä–æ–∫ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø—Ä–∏—á–∏–Ω –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–ø–∏—Å–∞–Ω–∏–∏ –∏–≥—Ä
```

#### –¢–µ—Å—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
```
–õ–æ–≥–∏–Ω: demoadmin@zvezdnoe-vereteno.ru / demo1234
URL: http://localhost:3000/admin/users
–î–µ–π—Å—Ç–≤–∏—è:
- –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
```

## üöÄ –ü—Ä–æ–¥–∞–∫—à–µ–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –≠—Å–∫–∏–∑ –¥–µ–ø–ª–æ—è
- **–í–∞—Ä–∏–∞–Ω—Ç—ã**: Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Next.js (standalone), –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã Postgres/MinIO
- **–°–µ–∫—Ä–µ—Ç—ã –∏ ENV** –≤ CI/CD —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ Secret Store
- **–ú–∏–≥—Ä–∞—Ü–∏–∏** –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –î–æ–º–µ–Ω—ã
- **–û—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç**: `zvezdnoe-vereteno.ru` (Tilda)
- **–õ–∏—á–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã**: `app.zvezdnoe-vereteno.ru` (Next.js)

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
```env
NODE_ENV=production
NEXTAUTH_URL=https://app.zvezdnoe-vereteno.ru
DATABASE_URL=postgresql://user:pass@prod-host:5432/zvezdnoe_vereteno
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
```

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –î–µ–∫–∞–±—Ä—å 2024
